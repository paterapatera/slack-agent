## 開発ガイドライン（README.mdより抜粋・補足）

### 概要

{未定義}

---

## ストーリー作成ガイドライン

作成場所: プロジェクトのルートディレクトリ直下の`story`フォルダ内

下記のテンプレートに従い、ストーリーを作成してください。

```markdown
# {ストーリーのタイトル}

## 概要

{ストーリーの概要を記載してください}

## 実行手順

**必須**: フェーズ内のすべてのタスクにチェックがつくまで、次のフェーズに進まないでください。

### Phase 1: 要件定義・設計【対話フェーズ - ユーザー確認必須】(上から順にチェックしてください)

- [ ] ストーリーの内容を確認する
- [ ] 実現方法を具体化をする
- [ ] **実現方法の具体化内容についてユーザーから承認を得る**
- [ ] 承認を得た内容をストーリーに反映する

#### 実現案

{実現案を記載してください}

### Phase 2: 実装【実装フェーズ - ユーザー確認必須】(上から順にチェックしてください)

- [ ] {必要に応じて実装手順を追加してください}
- [ ] Lint（ruff check . --fix）/ 型チェック（mypy）が通る
- [ ] `CODE_REVIEW_GUIDE.md` に準拠してコードレビューをする
  - AIエージェントが行うので、PRの作成は不要です
- [ ] **ユーザーからのコードレビューを受ける**

### Phase 3: テスト【テストフェーズ】(上から順にチェックしてください)

- [ ] テストコードを作成する
- [ ] テストが全てパスする

### Phase 4: ドキュメント化【ドキュメント更新フェーズ】(上から順にチェックしてください)

- [ ] 実装内容（`*.exp.md`）を更新する
- [ ] README.md、AGENTS.md を更新する

### Phase 5: コミット・プッシュ【最終フェーズ】(上から順にチェックしてください)

- [ ] コードのコミットメッセージを作成する
- [ ] **ユーザーからコミットメッセージの承認を受ける**
- [ ] コミット・プッシュする
```

## 実装内容(ドキュメント)作成ガイドライン

以下の条件に従い、指定されたコードファイルをexplainしたドキュメントを作成してください。

- ドキュメントの配置場所：コードファイルと同じパスに配置する
- ドキュメントファイル名：{コードファイル名} + `.exp.md`
  - コードファイル名が`hoge.php`の場合は、explainドキュメント名は`hoge.php.exp.md`となる
- explainではコード内で利用しているクラスのファイルパスを一覧でまとめるのも必須です

注意: テストコードは除外してください。

---

## Phase 4: ドキュメント更新方針（2025/11/07追記）

### Phase 4 で更新するドキュメント一覧

- README.md
  - Slack App設定手順
  - スレッド返信仕様
  - テスト/ lint 実行方法
- src/slack_agent/handlers/message.py.exp.md
  - スレッド返信の実装仕様
  - clean_mention_text関数の利用箇所・仕様
- src/slack_agent/text.py.exp.md
  - clean_mention_text関数の仕様
  - 利用箇所一覧
- src/slack_agent/bot.py.exp.md / src/slack_agent/config.py.exp.md
  - ログ出力・スレッド返信仕様の関連
- AGENTS.md
  - Phase 4更新方針（この内容）
- story/ユーザーはSlackでBotにメッセージを送信できる.md
  - Phase4のチェック済み項目更新（exp/README/AGENTS）

### ドキュメント反映方針

- すべてのexp.mdはコードファイルと同じパスに配置し、関数仕様・利用箇所・関連クラスファイルパスを明記する
- READMEは実行手順・Slack App設定・テスト/静的解析方法・スレッド返信仕様を日本語で記載する
- AGENTS.mdは各フェーズの更新方針を記録する
- storyは進捗状況（Phase4チェック）を反映する
